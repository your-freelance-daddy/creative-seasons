<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <title>Creative Pulse | EKOLITIKA</title>
    <style>
        :root {
            --primary: #a855f7;
            --primary-glow: #a855f788;
            --secondary: #ec4899;
            --bg-dark: #0f172a;
            --glass-bg: rgba(255, 255, 255, 0.07);
            --glass-border: rgba(255, 255, 255, 0.12);
            --text-main: #ffffff;
            --text-muted: #94a3b8;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body {
            font-family: 'Segoe UI', Inter, -apple-system, sans-serif;
            background: #0f172a;
            color: var(--text-main);
            margin: 0;
            min-height: 100vh;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* --- Animated Background --- */
        .ambient-light {
            position: fixed;
            top: 0; left: 0; width: 100vw; height: 100vh;
            z-index: -1;
            background: radial-gradient(circle at 50% 50%, #1e1b4b 0%, #0f172a 100%);
        }
        .orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.6;
            animation: float 20s infinite ease-in-out;
        }
        .orb-1 { width: 300px; height: 300px; background: var(--primary); top: -50px; left: -50px; animation-delay: 0s; }
        .orb-2 { width: 400px; height: 400px; background: var(--secondary); bottom: -100px; right: -50px; animation-delay: -5s; }
        .orb-3 { width: 200px; height: 200px; background: #6366f1; top: 40%; left: 60%; animation-delay: -10s; }

        @keyframes float {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(30px, -30px); }
        }

        /* --- UI Components --- */
        .container {
            width: 100%;
            max-width: 600px;
            padding: 20px;
            z-index: 1;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
            margin-top: 10px;
        }
        
        .logo-text {
            font-size: 1.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, #fff, #cbd5e1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: -0.02em;
        }

        .tagline {
            font-size: 0.9rem;
            color: var(--text-muted);
            margin-top: 5px;
        }

        /* Glass Cards */
        .glass-panel {
            background: var(--glass-bg);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 30px;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            transition: transform 0.3s ease, opacity 0.3s ease;
        }

        .btn {
            background: linear-gradient(135deg, var(--primary), #7c3aed);
            color: white;
            border: none;
            padding: 16px 32px;
            border-radius: 16px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: all 0.2s;
            box-shadow: 0 4px 15px rgba(168, 85, 247, 0.3);
            text-align: center;
        }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(168, 85, 247, 0.5); }
        .btn:active { transform: scale(0.98); }
        .btn-secondary { background: rgba(255,255,255,0.1); box-shadow: none; border: 1px solid rgba(255,255,255,0.1); }
        .btn-secondary:hover { background: rgba(255,255,255,0.2); }

        .btn-icon { font-size: 1.2rem; margin-right: 8px; }

        /* Form Elements */
        input[type="text"] {
            width: 100%;
            background: rgba(0,0,0,0.2);
            border: 1px solid var(--glass-border);
            padding: 15px;
            border-radius: 12px;
            color: white;
            font-size: 1rem;
            margin-bottom: 15px;
            outline: none;
        }
        input[type="text"]:focus { border-color: var(--primary); }
        
        label { display: block; margin-bottom: 8px; font-weight: 500; font-size: 0.9rem; color: #e2e8f0; }

        /* --- Views Management --- */
        .view { display: none; animation: fadeIn 0.4s ease-out; }
        .view.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* --- Dashboard Grid --- */
        .mode-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .mode-card {
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 140px;
        }
        .mode-card:hover { background: rgba(255,255,255,0.1); transform: translateY(-3px); border-color: var(--primary); }
        .mode-emoji { font-size: 2.5rem; margin-bottom: 10px; }
        .mode-name { font-weight: 700; color: white; margin-bottom: 4px; }
        .mode-desc { font-size: 0.75rem; color: var(--text-muted); line-height: 1.3; }

        /* --- Focus Wizard (Question Mode) --- */
        .progress-bar { width: 100%; height: 4px; background: rgba(255,255,255,0.1); border-radius: 2px; margin-bottom: 30px; }
        .progress-fill { height: 100%; background: var(--primary); border-radius: 2px; width: 0%; transition: width 0.3s; }
        
        .question-text { font-size: 1.4rem; font-weight: 700; margin-bottom: 25px; line-height: 1.4; }
        .option-btn {
            display: block; width: 100%; text-align: left;
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--glass-border);
            padding: 18px 20px; margin-bottom: 12px;
            border-radius: 12px; color: #cbd5e1;
            cursor: pointer; transition: 0.2s;
            font-size: 1rem;
        }
        .option-btn:hover { background: rgba(168, 85, 247, 0.15); border-color: var(--primary); color: white; }
        .option-btn.selected { background: var(--primary); border-color: var(--primary); color: white; }

        /* --- Result Card --- */
        .result-card { border-top: 4px solid var(--primary); }
        .result-header { font-size: 0.9rem; text-transform: uppercase; letter-spacing: 1px; color: var(--primary); margin-bottom: 10px; font-weight: 700; }
        .result-body { font-size: 1.1rem; line-height: 1.6; color: #e2e8f0; margin-bottom: 25px; }
        .result-archetype { font-size: 1.8rem; font-weight: 800; margin-bottom: 15px; color: white; }
        .action-box { background: rgba(168, 85, 247, 0.1); border-left: 3px solid var(--primary); padding: 15px; border-radius: 8px; margin-bottom: 20px; }
        
        /* --- Saved Sparks --- */
        .spark-item { padding: 15px; background: rgba(0,0,0,0.2); border-radius: 12px; margin-bottom: 10px; border: 1px solid rgba(255,255,255,0.05); }
        .spark-date { font-size: 0.75rem; color: var(--text-muted); display: block; margin-bottom: 5px; }

        .hidden { display: none; }
    </style>
</head>
<body>

    <div class="ambient-light">
        <div class="orb orb-1"></div>
        <div class="orb orb-2"></div>
        <div class="orb orb-3"></div>
    </div>

    <div class="container">
        <header class="header">
            <div class="logo-text">Creative Pulse</div>
            <div class="tagline">An EKOLITIKA Project</div>
        </header>

        <div id="view-onboarding" class="view active">
            <div class="glass-panel">
                <h2 style="font-size:1.8rem; margin-bottom:10px;">Unstick your mind.</h2>
                <p style="color:#cbd5e1; margin-bottom:30px; line-height:1.6;">
                    A free digital mentor for creators. No fluff, just practical steps to get you moving again.<br><br>
                    <em style="font-size:0.9rem; opacity:0.7;">100% Free ‚Ä¢ Private ‚Ä¢ No Login Required</em>
                </p>
                <form id="onboardForm">
                    <label>What should we call you?</label>
                    <input type="text" id="userName" placeholder="e.g., Alex, Sam..." required autocomplete="off">
                    
                    <label>What's your creative field?</label>
                    <input type="text" id="userField" placeholder="e.g., Design, Writing, Music..." required autocomplete="off">

                    <button type="submit" class="btn">Start Journey &rarr;</button>
                </form>
            </div>
            <div style="text-align:center; font-size:0.8rem; opacity:0.5; margin-top:20px;">
                Born from "The Creative Mess" Erasmus+ Course
            </div>
        </div>

        <div id="view-dashboard" class="view">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
                <h3 style="margin:0;">Hello, <span id="dashName" style="color:var(--primary);">Creator</span>.</h3>
                <button onclick="logout()" style="background:none; border:none; color:var(--text-muted); cursor:pointer; font-size:0.8rem;">Reset</button>
            </div>

            <div class="glass-panel" style="padding:20px;">
                <label style="margin-bottom:15px; display:block;">How can we help today?</label>
                <div class="mode-grid">
                    <div class="mode-card" onclick="startMode('diagnose')">
                        <div class="mode-emoji">ü©∫</div>
                        <div class="mode-name">Diagnose</div>
                        <div class="mode-desc">Find out why you're stuck.</div>
                    </div>
                    <div class="mode-card" onclick="startMode('inspire')">
                        <div class="mode-emoji">‚ú®</div>
                        <div class="mode-name">Inspire</div>
                        <div class="mode-desc">Refill your creative well.</div>
                    </div>
                    <div class="mode-card" onclick="startMode('brainstorm')">
                        <div class="mode-emoji">üå™Ô∏è</div>
                        <div class="mode-name">Brainstorm</div>
                        <div class="mode-desc">Generate wild ideas fast.</div>
                    </div>
                    <div class="mode-card" onclick="startMode('organize')">
                        <div class="mode-emoji">üì¶</div>
                        <div class="mode-name">Organize</div>
                        <div class="mode-desc">Make chaos actionable.</div>
                    </div>
                    <div class="mode-card" onclick="startMode('experiment')">
                        <div class="mode-emoji">üß™</div>
                        <div class="mode-name">Experiment</div>
                        <div class="mode-desc">Test ideas safely.</div>
                    </div>
                    <div class="mode-card" style="border-style:dashed; opacity:0.7;" onclick="showSaved()">
                        <div class="mode-emoji">üìÇ</div>
                        <div class="mode-name">My Sparks</div>
                        <div class="mode-desc">View your saved advice.</div>
                    </div>
                </div>
            </div>
        </div>

        <div id="view-wizard" class="view">
            <button onclick="goHome()" style="background:none; border:none; color:var(--text-muted); margin-bottom:10px; cursor:pointer;">&larr; Exit</button>
            <div class="glass-panel">
                <div class="progress-bar"><div class="progress-fill" id="progressBar"></div></div>
                <div id="questionContainer">
                    <div id="questionText" class="question-text">Question goes here...</div>
                    <div id="optionsArea"></div>
                    <textarea id="textInput" class="hidden" rows="4" style="width:100%; background:rgba(0,0,0,0.2); border:1px solid var(--glass-border); padding:15px; border-radius:12px; color:white; font-family:inherit; margin-bottom:15px; resize:none;"></textarea>
                </div>
                <button id="nextBtn" class="btn" style="margin-top:10px;" onclick="nextStep()">Continue</button>
            </div>
        </div>

        <div id="view-result" class="view">
            <div class="glass-panel result-card">
                <div class="result-header">Your Personal Prescription</div>
                <div class="result-archetype" id="resArchetype">The Result Title</div>
                <div class="result-body" id="resBody">
                    Advice text...
                </div>
                <div class="action-box">
                    <strong>‚ö° Tiny Next Step:</strong><br>
                    <span id="resAction">Action...</span>
                </div>
                <div style="display:flex; gap:10px;">
                    <button class="btn" onclick="saveResult()">Save Spark üíæ</button>
                    <button class="btn btn-secondary" onclick="goHome()">Done</button>
                </div>
            </div>
        </div>

        <div id="view-saved" class="view">
            <button onclick="goHome()" style="background:none; border:none; color:var(--text-muted); margin-bottom:10px; cursor:pointer;">&larr; Back</button>
            <h2 style="margin-bottom:20px;">Your Spark Library</h2>
            <div id="savedList"></div>
        </div>

    </div>

<script>
/* --- DATA & CONTENT ENGINE --- */
const content = {
    diagnose: {
        steps: [
            { q: "How does your 'stuckness' feel physically?", type:"choice", opts: ["Heavy/Exhausted", "Anxious/Buzzing", "Empty/Blank", "Frustrated/Tight"] },
            { q: "If your project could talk, what would it say?", type:"choice", opts: ["'You're not good enough'", "'I'm too complicated'", "'Why are you ignoring me?'", "'I'm boring'"] },
            { q: "What's the one tiny thing blocking you?", type:"text" }
        ]
    },
    inspire: {
        steps: [
            { q: "What is your creative tank running on?", type:"choice", opts: ["Fumes (Empty)", "Adrenaline (Panic)", "Routine (Boredom)", "Chaos (Distraction)"] },
            { q: "What's a piece of art/media that recently made you jealous?", type:"text" },
            { q: "Choose a permission slip for today:", type:"choice", opts: ["Permission to be bad", "Permission to do nothing", "Permission to copy (to learn)", "Permission to quit early"] }
        ]
    },
    brainstorm: {
        steps: [
            { q: "Set the constraint:", type:"choice", opts: ["If I had $0 budget", "If I had to finish in 1 hour", "If it had to be ugly", "If I were an alien"] },
            { q: "What is the problem you are solving?", type:"text" },
            { q: "Write 3 terrible ideas (fast). Go!", type:"text" }
        ]
    },
    organize: {
        steps: [
            { q: "How many open loops are in your head?", type:"choice", opts: ["1-3 (Manageable)", "4-10 (Messy)", "10+ (Chaos)", "I lost count"] },
            { q: "Which one task scares you the most?", type:"text" },
            { q: "What does 'Finished' look like for this week?", type:"text" }
        ]
    },
    experiment: {
        steps: [
            { q: "What's the risk level?", type:"choice", opts: ["Private (Just me)", "Low (A friend)", "Medium (Socials)", "High (Launch)"] },
            { q: "What's the worst meaningful thing that could happen?", type:"text" },
            { q: "How will you reward yourself for trying?", type:"text" }
        ]
    }
};

/* --- STATE MANAGEMENT --- */
let state = {
    user: { name: "", field: "" },
    history: [],
    currentMode: null,
    step: 0,
    answers: []
};

/* --- INIT --- */
window.onload = () => {
    const savedUser = localStorage.getItem('cp_user');
    if (savedUser) {
        state.user = JSON.parse(savedUser);
        document.getElementById('dashName').innerText = state.user.name;
        switchView('view-dashboard');
    } else {
        switchView('view-onboarding');
    }
    loadHistory();
};

/* --- NAVIGATION --- */
function switchView(viewId) {
    document.querySelectorAll('.view').forEach(el => el.classList.remove('active'));
    document.getElementById(viewId).classList.add('active');
    window.scrollTo(0,0);
}

function goHome() {
    switchView('view-dashboard');
}

function logout() {
    if(confirm("Reset your profile? This won't delete saved sparks.")) {
        localStorage.removeItem('cp_user');
        location.reload();
    }
}

/* --- ONBOARDING --- */
document.getElementById('onboardForm').addEventListener('submit', (e) => {
    e.preventDefault();
    const name = document.getElementById('userName').value;
    const field = document.getElementById('userField').value;
    if(name && field) {
        state.user = { name, field };
        localStorage.setItem('cp_user', JSON.stringify(state.user));
        document.getElementById('dashName').innerText = name;
        switchView('view-dashboard');
    }
});

/* --- MODE WIZARD LOGIC --- */
function startMode(mode) {
    state.currentMode = mode;
    state.step = 0;
    state.answers = [];
    switchView('view-wizard');
    renderStep();
}

function renderStep() {
    const modeData = content[state.currentMode];
    const qData = modeData.steps[state.step];
    
    // Progress
    const pct = ((state.step) / modeData.steps.length) * 100;
    document.getElementById('progressBar').style.width = pct + "%";

    // Text
    document.getElementById('questionText').innerText = qData.q;
    
    // Inputs
    const optsArea = document.getElementById('optionsArea');
    const textArea = document.getElementById('textInput');
    const nextBtn = document.getElementById('nextBtn');
    
    optsArea.innerHTML = "";
    textArea.classList.add('hidden');
    textArea.value = "";
    nextBtn.disabled = true;
    nextBtn.style.opacity = "0.5";

    if (qData.type === "choice") {
        optsArea.classList.remove('hidden');
        qData.opts.forEach(opt => {
            const btn = document.createElement('button');
            btn.className = "option-btn";
            btn.innerText = opt;
            btn.onclick = () => {
                document.querySelectorAll('.option-btn').forEach(b => b.classList.remove('selected'));
                btn.classList.add('selected');
                nextBtn.disabled = false;
                nextBtn.style.opacity = "1";
                // Auto-save val temporarily
                textArea.value = opt; 
            };
            optsArea.appendChild(btn);
        });
    } else {
        textArea.classList.remove('hidden');
        textArea.focus();
        textArea.oninput = () => {
            if(textArea.value.length > 2) {
                nextBtn.disabled = false;
                nextBtn.style.opacity = "1";
            }
        };
    }
}

function nextStep() {
    const val = document.getElementById('textInput').value;
    state.answers.push(val);
    
    state.step++;
    if (state.step < content[state.currentMode].steps.length) {
        renderStep();
    } else {
        generateResult();
    }
}

/* --- THE LOGIC ENGINE (GENERATOR) --- */
function generateResult() {
    const mode = state.currentMode;
    const ans = state.answers;
    const user = state.user;
    
    let title = "";
    let body = "";
    let action = "";

    // logic engine: Maps input patterns to archetypes
    if (mode === 'diagnose') {
        if (ans[0].includes("Heavy") || ans[0].includes("Empty")) {
            title = "The Empty Well";
            body = `You are trying to draw water from a dry well, ${user.name}. The feeling of heaviness isn't laziness‚Äîit's a biological signal to stop outputting. Your "${ans[2]}" block is likely a symptom of burnout, not lack of skill.`;
            action = "Do strictly zero creative work for 24 hours. Input only (books, walks, sleep).";
        } else {
            title = "Analysis Paralysis";
            body = `Your energy is high but scattered. You are over-intellectualizing the process. When your project says "${ans[1]}", it's actually asking for simplification.`;
            action = "Set a timer for 10 minutes. Do the 'ugly version' of the next step. Quantity over quality.";
        }
    } 
    else if (mode === 'inspire') {
        title = "The Spark Hunter";
        body = `You're running on ${ans[0]}, which is not sustainable. Inspiration isn't magic; it's a discipline. You chose "${ans[2]}"‚Äîlean into that hard.`;
        action = "Curate 3 images or songs that match the 'vibe' of what you want to make. Do nothing else.";
    }
    else if (mode === 'brainstorm') {
        title = "The Chaos Pilot";
        body = `Constraints breed creativity. By thinking about "${ans[0]}", you tricked your brain into bypassing its internal critic. The terrible ideas you wrote? One of them is the seed of genius.`;
        action = "Pick the most ridiculous idea you wrote. Find one realistic aspect of it and sketch it out.";
    }
    else if (mode === 'organize') {
        title = "The Essentialist";
        body = `You are carrying too much cognitive load. ${ans[0]} open loops is a recipe for anxiety. Your intuition knows that "${ans[1]}" is the beast you need to slay.`;
        action = "Ignore everything else. Write the first 3 sub-steps for that scary task. Do step 1 now.";
    }
    else if (mode === 'experiment') {
        title = "The Scientist";
        body = `Fear is data. You identified that the worst outcome is "${ans[1]}". Usually, when we write it down, it looks smaller. You are testing a hypothesis, not your self-worth.`;
        action = "Run the test. Then, regardless of the result, trigger your reward: " + ans[2];
    }

    // Render Result
    document.getElementById('resArchetype').innerText = title;
    document.getElementById('resBody').innerText = body;
    document.getElementById('resAction').innerText = action;
    
    switchView('view-result');
}

/* --- SAVING SYSTEM --- */
function saveResult() {
    const spark = {
        title: document.getElementById('resArchetype').innerText,
        action: document.getElementById('resAction').innerText,
        date: new Date().toLocaleDateString(),
        mode: state.currentMode
    };
    
    let history = JSON.parse(localStorage.getItem('cp_history') || "[]");
    history.unshift(spark);
    localStorage.setItem('cp_history', JSON.stringify(history));
    
    alert("Spark saved to your library!");
}

function loadHistory() {
    const history = JSON.parse(localStorage.getItem('cp_history') || "[]");
    const container = document.getElementById('savedList');
    container.innerHTML = "";
    
    if(history.length === 0) {
        container.innerHTML = "<div style='opacity:0.6; text-align:center;'>No saved sparks yet. Go explore a mode!</div>";
        return;
    }

    history.forEach(item => {
        const div = document.createElement('div');
        div.className = "spark-item";
        div.innerHTML = `
            <span class="spark-date">${item.date} ‚Ä¢ ${item.mode.toUpperCase()}</span>
            <div style="font-weight:700; color:var(--primary); margin-bottom:5px;">${item.title}</div>
            <div style="font-size:0.9rem;">${item.action}</div>
        `;
        container.appendChild(div);
    });
}

function showSaved() {
    loadHistory();
    switchView('view-saved');
}
</script>
</body>
</html>
