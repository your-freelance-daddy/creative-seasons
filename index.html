<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
<title>Creative Pulse</title>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Caprasimo&display=swap');
    :root {
        --primary: #a855f7;
        --primary-glow: #a855f788;
        --secondary: #ec4899;
        --bg-dark: #0f172a;
        --glass-bg: rgba(255, 255, 255, 0.08);
        --glass-border: rgba(255, 255, 255, 0.15);
        --text-main: #ffffff;
        --text-muted: #94a3b8;
    }
    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
    body {
        font-family: 'Segoe UI', Inter, -apple-system, sans-serif;
        background: #0f172a;
        color: var(--text-main);
        margin: 0;
        min-height: 100vh;
        overflow-x: hidden;
        display: flex;
        flex-direction: column;
        align-items: center;
    }
    .ambient-light { position: fixed; top:0; left:0; width:100vw; height:100vh; z-index:-1; background: radial-gradient(circle at 50% 50%, #1e1b4b 0%, #0f172a 100%); }
    .orb { position: absolute; border-radius: 50%; filter: blur(80px); opacity: 0.6; animation: float 20s infinite ease-in-out; }
    .orb-1 { width: 300px; height: 300px; background: var(--primary); top:-50px; left:-50px; animation-delay:0s; }
    .orb-2 { width: 400px; height: 400px; background: var(--secondary); bottom:-100px; right:-50px; animation-delay:-5s; }
    .orb-3 { width: 200px; height: 200px; background: #6366f1; top:40%; left:60%; animation-delay:-10s; }
    @keyframes float {0%,100%{transform:translate(0,0);}50%{transform:translate(30px,-30px);}}
    .container { width:100%; max-width:600px; padding:20px; z-index:1; display:flex; flex-direction:column; min-height:100vh; position:relative; }
    .header { text-align:center; margin-bottom:10px; margin-top:15px; display:flex; flex-direction:column; align-items:center; }
    .logo-img { width:180px; height:auto; filter:brightness(1.2); transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1); }
    .logo-img:hover { transform: scale(1.05) rotate(-2deg); }
    .platform-title { font-family:'Caprasimo', cursive; font-size:3rem; font-weight:800; margin-top:10px; margin-bottom:25px; color:#1e1b4b; letter-spacing:1.5px; text-shadow:0 0 10px rgba(255,255,255,0.8),0 0 25px rgba(255,255,255,0.6),0 0 45px rgba(255,255,255,0.4); }
    .glass-panel { background: var(--glass-bg); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border:1px solid var(--glass-border); border-radius:24px; padding:28px; box-shadow:0 8px 32px rgba(0,0,0,0.2); margin-bottom:20px; transition: transform 0.2s ease, opacity 0.3s ease; position:relative; overflow:hidden; }
    .glass-panel::after { content:''; position:absolute; top:0; left:-100%; width:50%; height:100%; background:linear-gradient(to right, transparent, rgba(255,255,255,0.05), transparent); transform: skewX(-25deg); transition:0.5s; pointer-events:none; }
    .glass-panel:hover::after { left:150%; transition:0.7s; }
    .btn { background:linear-gradient(135deg, var(--primary), #7c3aed); color:white; border:none; padding:16px 32px; border-radius:16px; font-size:1rem; font-weight:700; cursor:pointer; width:100%; transition:all 0.2s cubic-bezier(0.34,1.56,0.64,1); box-shadow:0 4px 15px rgba(168,85,247,0.3); display:inline-flex; justify-content:center; align-items:center; gap:8px; text-decoration:none; }
    .btn:hover { transform:translateY(-3px) scale(1.02); box-shadow:0 8px 25px rgba(168,85,247,0.5); }
    .btn:active { transform:scale(0.96); }
    .btn-secondary { background: rgba(255,255,255,0.1); box-shadow:none; border:1px solid rgba(255,255,255,0.1); }
    .btn-secondary:hover { background: rgba(255,255,255,0.2); transform:translateY(-2px); }
    .icon-btn { background: rgba(255,255,255,0.1); border:1px solid var(--glass-border); color: var(--text-muted); width:40px; height:40px; border-radius:12px; display:flex; align-items:center; justify-content:center; cursor:pointer; transition:0.2s; font-size:1.2rem; }
    .icon-btn:hover { background: rgba(236,72,153,0.2); color:white; border-color:#ec4899; transform:rotate(10deg); }
    .story-btn { background: rgba(255,255,255,0.15); border:1px solid var(--glass-border); color:#fff; font-size:0.85rem; cursor:pointer; padding:10px 15px; border-radius:12px; transition:all 0.3s; display:inline-block; text-decoration:none; font-weight:600; }
    .story-btn:hover { opacity:1; color:white; border-color:var(--primary); background: rgba(168,85,247,0.2); transform:translateY(-2px); }
    .footer-bar { display:flex; flex-direction:column; gap:10px; align-items:center; width:100%; max-width:600px; padding:0 20px; margin-top:auto; margin-bottom:10px; }
    .footer-bar .story-btn { max-width:300px; width:100%; text-align:center; }
    .view { display:none; animation: fadeIn 0.4s cubic-bezier(0.2,0.8,0.2,1); }
    .view.active { display:block; }
    @keyframes fadeIn { from { opacity:0; transform:translateY(15px) scale(0.98); } to { opacity:1; transform:translateY(0) scale(1); } }
    .mode-grid { display:grid; grid-template-columns:1fr 1fr; gap:15px; }
    .mode-card { background:linear-gradient(145deg, rgba(255,255,255,0.07), rgba(255,255,255,0.02)); border:1px solid var(--glass-border); border-radius:20px; padding:20px 15px; text-align:center; cursor:pointer; transition:all 0.3s cubic-bezier(0.34,1.56,0.64,1); display:flex; flex-direction:column; align-items:center; justify-content:center; min-height:145px; position:relative; }
    .mode-card:hover { background: rgba(255,255,255,0.12); transform: translateY(-5px) scale(1.02); border-color: var(--primary); box-shadow: 0 10px 30px -10px rgba(168,85,247,0.4); }
    .mode-emoji { font-size:2.8rem; margin-bottom:12px; filter: drop-shadow(0 0 10px rgba(255,255,255,0.3)); }
    .mode-name { font-weight:800; color:white; margin-bottom:5px; font-size:1.1rem; }
    .mode-desc { font-size:0.75rem; color:#cbd5e1; line-height:1.4; max-width:90%; }
    .progress-container { width:100%; height:6px; background: rgba(255,255,255,0.1); border-radius:10px; margin-bottom:30px; overflow:hidden; }
    .progress-fill { height:100%; background: linear-gradient(90deg, var(--primary), var(--secondary)); border-radius:10px; width:0%; transition: width 0.5s cubic-bezier(0.2,0.8,0.2,1); box-shadow:0 0 10px var(--primary); }
    .question-text { font-size:1.5rem; font-weight:800; margin-bottom:25px; line-height:1.35; color:#fff; text-shadow:0 2px 10px rgba(0,0,0,0.3); }
    .option-btn { display:flex; align-items:center; width:100%; text-align:left; background: rgba(255,255,255,0.03); border:1px solid var(--glass-border); padding:18px 22px; margin-bottom:12px; border-radius:16px; color:#cbd5e1; cursor:pointer; transition:0.2s; font-size:1rem; font-weight:500; }
    .option-btn:hover { background: rgba(168,85,247,0.15); border-color:var(--primary); color:white; padding-left:26px; }
    .option-btn.selected { background: linear-gradient(90deg, var(--primary), #9333ea); border-color:var(--primary); color:white; font-weight:700; box-shadow:0 4px 15px rgba(168,85,247,0.4); transform: scale(1.01); }
    .result-card { border-top:5px solid var(--primary); }
    .result-header { font-size:0.85rem; text-transform:uppercase; letter-spacing:2px; color:var(--secondary); margin-bottom:15px; font-weight:800; }
    .result-archetype { font-size:2rem; font-weight:900; margin-bottom:20px; background:linear-gradient(135deg, #fff, #e9d5ff); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
    .typewriter-text { font-size:1.15rem; line-height:1.7; color:#e2e8f0; margin-bottom:30px; border-left:2px solid var(--glass-border); padding-left:15px; }
    .cursor::after { content:'|'; animation: blink 1s infinite; }
    @keyframes blink {50%{opacity:0;}}
    .action-box { background: rgba(168,85,247,0.15); border:1px solid rgba(168,85,247,0.3); padding:20px; border-radius:16px; margin-bottom:25px; }
    .modal-overlay { position:fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.8); backdrop-filter: blur(8px); z-index:100; display:flex; align-items:center; justify-content:center; opacity:0; pointer-events:none; transition:0.3s; }
    .modal-overlay.open { opacity:1; pointer-events:all; }
    .modal-content { background:#1e1b4b; border:2px solid var(--primary); width:90%; max-width:500px; max-height:85vh; overflow-y:auto; border-radius:24px; padding:30px; transform:translateY(20px); transition:0.3s; box-shadow:0 0 40px rgba(168,85,247,0.4); }
    .modal-overlay.open .modal-content { transform:translateY(0); }
    .story-text { font-size:1rem; line-height:1.7; color:#cbd5e1; margin-bottom:15px; }
    .story-highlight { color: var(--primary); font-weight:700; }
    .hidden { display:none; }
    .top-nav { display:flex; justify-content:space-between; align-items:center; margin-bottom:15px; }
    input[type="text"], textarea { width:100%; background: rgba(0,0,0,0.3); border:1px solid var(--glass-border); padding:16px; border-radius:14px; color:white; font-size:1rem; margin-bottom:18px; outline:none; transition:0.2s; font-family:inherit; }
    input[type="text"]:focus, textarea:focus { border-color:var(--primary); background: rgba(0,0,0,0.5); box-shadow:0 0 0 3px rgba(168,85,247,0.2); }
    label { display:block; margin-bottom:8px; font-weight:600; font-size:0.9rem; color:#e9d5ff; }
</style>
</head>
<body>
<div class="ambient-light">
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>
    <div class="orb orb-3"></div>
</div>
<div class="container">
<header class="header">
<a href="https://ekolitika.framer.website/" target="_blank">
    <img src="https://framerusercontent.com/images/NhZAoGoxBJzZIPWRIXCzVkkNuDA.png?scale-down-to=512" alt="EKOLITIKA Logo" class="logo-img">
</a>
<div class="platform-title">Creative Pulse</div>
</header>

<!-- Onboarding -->
<div id="view-onboarding" class="view active">
    <div class="glass-panel" style="text-align:center;">
        <h2 style="font-size:1.8rem; margin-bottom:15px; background: linear-gradient(to right,#fff,#cbd5e1); -webkit-background-clip:text; -webkit-text-fill-color:transparent;">Unstick your mind.</h2>
        <p style="color:#cbd5e1; margin-bottom:30px; line-height:1.6;">
            A digital mentor for the creative community.<br>
            Diagnose blocks, find inspiration, and get actionable advice.
        </p>
        <form id="onboardForm" style="text-align:left;">
            <label>Your Name / Nickname</label>
            <input type="text" id="userName" placeholder="e.g. Alex, Sam..." required autocomplete="off">
            <label>Your Creative Field</label>
            <input type="text" id="userField" placeholder="e.g. Design, Education, Music..." required autocomplete="off">
            <button type="submit" class="btn">Start Your Journey üöÄ</button>
        </form>
    </div>
</div>

<!-- Dashboard -->
<div id="view-dashboard" class="view">
    <div class="top-nav">
        <div>
            <div style="font-size:0.8rem; color:var(--text-muted); text-transform:uppercase; letter-spacing:1px;">Welcome back</div>
            <div style="font-size:1.4rem; font-weight:700;" id="dashName">Creator</div>
        </div>
        <button onclick="logout()" class="icon-btn" title="Reset Profile">‚èª</button>
    </div>
    <div class="glass-panel" style="padding:20px 20px 30px 20px;">
        <div style="text-align:center; margin-bottom:20px; font-weight:600; color:#e2e8f0;">Choose your mode</div>
        <div class="mode-grid">
            <div class="mode-card" onclick="startMode('diagnose')"><div class="mode-emoji">ü©∫</div><div class="mode-name">Diagnose</div><div class="mode-desc">Identify exactly why you are stuck.</div></div>
            <div class="mode-card" onclick="startMode('inspire')"><div class="mode-emoji">‚ú®</div><div class="mode-name">Inspire</div><div class="mode-desc">Refuel your creative energy tank.</div></div>
            <div class="mode-card" onclick="startMode('brainstorm')"><div class="mode-emoji">üí°</div><div class="mode-name">Brainstorm</div><div class="mode-desc">Break rules and think wild.</div></div>
            <div class="mode-card" onclick="startMode('organize')"><div class="mode-emoji">üì¶</div><div class="mode-name">Organize</div><div class="mode-desc">Turn chaos into tiny steps.</div></div>
            <div class="mode-card" onclick="startMode('experiment')"><div class="mode-emoji">üöÄ</div><div class="mode-name">Experiment</div><div class="mode-desc">Test ideas without fear.</div></div>
            <div class="mode-card" style="border-style:dashed; opacity:0.8;" onclick="alertModal('Download Your Sparks','To save your results, use the <b>Download Spark as PDF üìÑ</b> button on the results screen. This keeps your data private and secure on your device!')"><div class="mode-emoji">üíæ</div><div class="mode-name">Saved Sparks</div><div class="mode-desc">Access past insights.</div></div>
        </div>
    </div>
</div>

<!-- Wizard/Questionnaire -->
<div id="view-wizard" class="view">
    <div class="glass-panel">
        <div class="progress-container"><div class="progress-fill" id="progressFill"></div></div>
        <div class="question-text" id="questionText">Question goes here</div>
        <div id="optionsContainer"></div>
    </div>
</div>

<!-- Results -->
<div id="view-results" class="view">
    <div class="glass-panel result-card">
        <div class="result-header">Your Creative Pulse</div>
        <div class="result-archetype" id="resArchetype">Archetype</div>
        <div class="typewriter-text" id="resBody"></div>
        <div class="action-box" id="resActionBox">
            <strong>Next Step:</strong> <span id="resAction"></span>
        </div>
        <button class="btn" onclick="downloadSparkPDF()">Download Spark as PDF üìÑ</button>
        <button class="btn btn-secondary" onclick="goToDashboard()">Back to Dashboard üè†</button>
    </div>
</div>

<!-- Story Modal -->
<div class="modal-overlay" id="storyModal">
    <div class="modal-content">
        <button class="icon-btn" onclick="closeStory()" style="position:absolute;top:15px;right:15px;">‚úñ</button>
        <h3 style="margin-bottom:20px; color:#fff; text-align:center;">Story Mode</h3>
        <div class="story-text">
            <p>Here is your creative journey and context. Each answer you gave is reflected in your Spark. Your path is unique, <span class="story-highlight">never generic</span>.</p>
        </div>
    </div>
</div>

<footer class="footer-bar">
    <a href="#" class="story-btn" onclick="openStory()">View Spark Story üìñ</a>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<script>
    const TYPING_SPEED = 25;
    let currentMode = '';
    let currentStep = 0;
    let userProfile = { name:'', field:'' };
    let userAnswers = [];
    const questions = [
        { question:"What‚Äôs your current creative mood?", options:["Excited üåü","Frustrated üò§","Confused ü§î","Curious üßê","Energetic ‚ö°"] },
        { question:"Where do you usually get stuck?", options:["Planning","Execution","Ideas","Motivation","Collaboration"] },
        { question:"How much time can you commit today?", options:["5-10 min","10-20 min","20-40 min","1+ hour"] },
        { question:"Do you prefer structured advice or free-flowing ideas?", options:["Structured","Free-flowing","Mixed"] }
    ];

    const archetypes = [
        {name:"The Visionary", pattern:["Excited","Curious","Energetic"], advice:"You have big ideas but need clarity on execution.", action:"Pick one idea and prototype it today."},
        {name:"The Analyst", pattern:["Confused","Structured"], advice:"You need structure to make progress.", action:"Break tasks into 3 actionable steps."},
        {name:"The Rebel", pattern:["Frustrated","Free-flowing"], advice:"Rules are boring you; channel energy into experimentation.", action:"Try one wild idea without fear of failure."},
        {name:"The Collaborator", pattern:["Collaboration"], advice:"You thrive with peers.", action:"Share your ideas with someone for feedback."},
        {name:"The Quick Spark", pattern:["5-10 min","10-20 min"], advice:"Short bursts work best.", action:"Use micro-sessions to advance your ideas."}
    ];

    function showView(viewId){
        document.querySelectorAll('.view').forEach(v=>v.classList.remove('active'));
        document.getElementById(viewId).classList.add('active');
    }

    function goToDashboard(){
        showView('view-dashboard');
    }

    function logout(){
        localStorage.clear();
        location.reload();
    }

    function startMode(mode){
        currentMode = mode;
        currentStep = 0;
        userAnswers = [];
        showView('view-wizard');
        renderQuestion();
    }

    function renderQuestion(){
        const q = questions[currentStep];
        document.getElementById('questionText').innerText = q.question;
        const container = document.getElementById('optionsContainer');
        container.innerHTML='';
        q.options.forEach(opt=>{
            const btn = document.createElement('button');
            btn.className='option-btn';
            btn.innerText=opt;
            btn.onclick=()=>selectAnswer(opt);
            container.appendChild(btn);
        });
        document.getElementById('progressFill').style.width = `${(currentStep/questions.length)*100}%`;
    }

    function selectAnswer(answer){
        userAnswers[currentStep]=answer;
        currentStep++;
        if(currentStep<questions.length) renderQuestion();
        else showResults();
    }

    function showResults(){
        const matched = archetypes.map(a=>{
            let score=0;
            a.pattern.forEach(p=>{ if(userAnswers.includes(p)) score++; });
            return {...a, score};
        }).sort((a,b)=>b.score-a.score)[0];

        const result = matched || {name:"Creative Explorer", advice:"Your journey is unique. Keep exploring!", action:"Try a small creative experiment today.", fullContext:questions.map((q,i)=>({question:q.question,answer:userAnswers[i]})), mode:currentMode};
        localStorage.setItem('currentResult',JSON.stringify(result));
        document.getElementById('resArchetype').innerText=result.name;
        document.getElementById('resAction').textContent=result.action;
        document.getElementById('resActionBox').classList.remove('hidden');
        typeWriter(document.getElementById('resBody'), result.advice);
        showView('view-results');
    }

    function typeWriter(element,text){
        let i=0;
        element.innerHTML='';
        (function type(){
            if(i<text.length){
                element.innerHTML=text.substring(0,i+1)+'<span class="cursor"></span>';
                i++; setTimeout(type,TYPING_SPEED);
            }else{ element.innerHTML=text; }
        })();
    }

    window.downloadSparkPDF=function(){
        const currentResult=localStorage.getItem('currentResult');
        if(!currentResult)return alert("No result available to download.");
        const element=document.createElement('div');
        const resultData=JSON.parse(currentResult);
        let html=`<h1 style="color:#9333ea;">Creative Pulse Result</h1>`;
        html+=`<h2>${resultData.name}</h2>`;
        html+=`<p>${resultData.advice}</p>`;
        html+=`<h3>Next Step:</h3><p>${resultData.action}</p>`;
        html+=`<h3>Context:</h3><ul>`;
        resultData.fullContext.forEach(q=>{html+=`<li><b>${q.question}</b><br>${q.answer}</li>`;});
        html+=`</ul>`;
        element.innerHTML=html;
        html2pdf().from(element).save(`${resultData.mode}_spark.pdf`);
    }

    window.openStory=function(){document.getElementById('storyModal').classList.add('open');}
    window.closeStory=function(){document.getElementById('storyModal').classList.remove('open');}
    
    document.getElementById('onboardForm').addEventListener('submit',e=>{
        e.preventDefault();
        userProfile.name=document.getElementById('userName').value.trim();
        userProfile.field=document.getElementById('userField').value.trim();
        localStorage.setItem('userProfile',JSON.stringify(userProfile));
        document.getElementById('dashName').innerText=userProfile.name;
        goToDashboard();
    });

    // On load, check for stored profile
    window.onload=function(){
        const savedProfile = localStorage.getItem('userProfile');
        if(savedProfile){
            userProfile = JSON.parse(savedProfile);
            document.getElementById('dashName').innerText=userProfile.name;
            goToDashboard();
        }
    }

    function alertModal(title, message){
        document.getElementById('storyModal').classList.add('open');
        const modalContent=document.querySelector('#storyModal .modal-content');
        modalContent.querySelector('h3').innerHTML=title;
        modalContent.querySelector('.story-text').innerHTML=message;
    }
</script>
</body>
</html>
